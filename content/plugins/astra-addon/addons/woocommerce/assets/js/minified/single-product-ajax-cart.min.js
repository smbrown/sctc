!function(o){astraSingleProductAjax={quick_view_enable:astra.shop_quick_view_enable||!1,ajax_add_to_cart_enable:astra.single_product_ajax_add_to_cart||!1,init:function(){this._bind()},_bind:function(){astraSingleProductAjax.ajax_add_to_cart_enable&&o(document).on("click","body.single-product button.single_add_to_cart_button",astraSingleProductAjax._processAjaxRequest),astraSingleProductAjax.quick_view_enable&&o(document.body).on("click","#ast-quick-view-content button.single_add_to_cart_button",astraSingleProductAjax._processAjaxRequest),o(document.body).on("added_to_cart",astraSingleProductAjax._updateButton)},_processAjaxRequest:function(a){a.preventDefault();var t=o(this),e=o(this).val()||"";o('input[name="variation_id"]').val();if(!t.hasClass("disabled")){t.removeClass("added"),t.addClass("loading");var r=o('input[name="quantity"]').val();if(o(".woocommerce-grouped-product-list-item").length){var n=o("input.qty");r=[];o.each(n,function(a,t){var e=o(this).attr("name");e=(e=e.replace("quantity[","")).replace("]",""),e=parseInt(e),o(this).val()&&(r[e]=o(this).val())})}var d=o("form.cart").serialize();o.ajax({url:astra.ajax_url,type:"POST",data:"action=astra_add_cart_single_product&add-to-cart="+e+"&"+d,success:function(a){o(document.body).trigger("wc_fragment_refresh"),o(document.body).trigger("added_to_cart",[t])}})}},_updateButton:function(a,t){t=void 0!==t&&t,o("button.single_add_to_cart_button").length&&(o(t).removeClass("loading"),o(t).addClass("added"),astra.is_cart||0!==o(t).parent().find(".added_to_cart").length||o(t).after(' <a href="'+astra.cart_url+'" class="added_to_cart wc-forward" title="'+astra.view_cart+'">'+astra.view_cart+"</a>"),o(document.body).trigger("wc_cart_button_updated",[t]))}},o(function(){astraSingleProductAjax.init()})}(jQuery);